# 반복문

프로그래밍 언어는 반복적인 일을 수행하는 데 있어 무척이나 유용합니다. 예를 들어서 간단한 연산부터 아니면 특정한 똑같은 상황을 반복하는 것과 같은 것처럼 말이죠. 이번에는 그러한 일을 수행할 수 있게 해주는 자바스크립트의 반복 구조에 대해서 한 번 알아보겠습니다. 

## Keep mp in the loop

반복은 프로그래밍에서 아주 중요한 개념입니다. 똑같은 일을 계속 반복하죠. 영어로는 Iteration이라고 합니다. 

그러면 예를 한 번 들어볼게요. 근손실을 방지하기 위해 눈물을 흘리지 않는 헬창의 삶을 예로 들게요.

<!-- 헬창 반복문 그림 넣기 -->

Counter: 닭 가슴살이 없어.
Condition: 나는 이번 달을 버티기 위한 충분한 닭 가슴살을 구비해두었는가?
Iterator: Collect 닭가슴살

<!-- Counter, Condition, Iterator에 대한 설명넣기 -->

아마도 이렇게 의사코드를 작성할 수 있겠죠.

```javascript
loop(닭가슴살 = 0; 필요한닭가슴살 = 10) {
  if (닭가슴살 >= 필요한 닭가슴살) {
    exit loop;
    // 충분한 닭가슴살이 있고 나의 마음은 안정되었다.
  } else {
    닭가슴살 += 2;
    // 닭가슴살을 2개 더 주문하자.
  }
}
```

자, 코드를 보면 현재 헬창이 원하는 닭가슴살의 개수는 10개입니다. 그리고 현재가지고 있는 닭가슴살은 0개이죠. 그는 닭가슴살이 떨어질지도 모른다는 생각에 이미 근손실이 발생하는 중입니다....(는 헛소리고요..). 한 번의 반복마다 헬창은 현재 가지고 있는 닭가슴살이 필요한 닭가슴살만큼 있는지 확인합니다. 만약에 충분히 있다면 반복을 그만하고, 없다면 2개씩 더 주문할 것 입니다.

## Why bother?

여러분은 이제 반복문의 개념에 대해서 대충은 이해가 가실 것입니다. 그러면 우리가 왜 반복문이 필요할까요? 왜냐하면 반복문은 **똑같은 일을 귀찮지 않고 정말 빠르게 수행해내기 때문이죠.**

한 번 예시를 보겠습니다. 만약에 여러분이 놀이공원의 롤러코스터 입장을 체크하는 아르바이트를 하고 있다고 생각해볼게요.

키가 120cm, 그리고 나이가 10살 이상인 경우에만 입장을 시킨다고 가정하보겠습니다.

```javascript
function checkEntrance(height, age) {
  if (height >= 120 && age >= 10) {
    alert('입장하세요.');
  } else {
    alert('입장하실 수 없습니다.');
  } 
}

let height = prompt('키가 어떻게 되세요?');
let age = prompt('나이는 어떻게 되시죠?');

checkEntrance(height, age);
```

이런식으로 코드를 짤 수 있겠죠. 근데 롤러코스테는 보통 여러 명이 타죠? 그런데 사람이 엄청 많이 들어오면 어떻게 해야 할까요? 

```javascript
let height = prompt('키가 어떻게 되세요?');
let age = prompt('나이는 어떻게 되시죠?');

checkEntrance(height, age);

height = prompt('키가 어떻게 되세요?');
age = prompt('나이는 어떻게 되시죠?');
checkEntrance(height, age);

height = prompt('키가 어떻게 되세요?');
age = prompt('나이는 어떻게 되시죠?');
checkEntrance(height, age);

// .........
```

이런 식으로 코드를 짜야 할 것입니다. 코드가 엄청 비효율적이죠? 우리는 이것을 반복문을 통해서 깔끔하고 손쉽게 해결할 수 있습니다.

```javascript
function checkEntrance(height, age) {
  if (height >= 120 && age >= 10) {
    alert('입장하세요.');
  } else {
    alert('입장하실 수 없습니다.');
  } 
}

for(let i = 0; i < 10; i++) {
  let height = prompt('키가 어떻게 되세요?');
  let age = prompt('나이는 어떻게 되시죠?');

  checkEntrance(height, age);
}
```

위에서 우리는 10명의 사람을 반복문을 통하여 체크하였습니다. 만약에 우리가 반복문을 쓰지 않았다면 코드가 엄청 늘어났겠죠. 10,000명이 들어왔다면 30,000 ~ 40,000 줄의 코드를 적어주었어야 할 것입니다. 하지만 반복문에서는, 하나의 숫자만 바꿔주면 손 쉽게 해결되죠. 반복문은 아주 좋은 친구인것 같습니다.


## The standard for loop

그러면 루프의 구조에 대해서 한 번 알아보겠습니다. 첫번째는 여러분이 아마 가장 많이 쓸 `for` loop 입니다. 

```javascript
for (초기화; 조건; 마지막-표현식) {
  // 반복을 할 코드
}
```

for loop가 가지고 있는 구성은:

1. `for` 키워드. 괄호를 붙여야 합니다.
2. 괄호안에 세미콜론으로 나뉜 3개의 아이템을 가지고 있습니다.
  
  1. 초기화(Initializer) - 보통 숫자 값을 가지고 있는 변수입니다. 이 변수는 매번 반복이 될 때마다 보통 값이 올라갈 것입니다. 가끔씩 무엇을 카운트 변수(counter variable) 라고도 불립니다.

  2. 조건(Condition) - 앞에서 얘기한 것 처럼, 조건은 언제 반복문이 멈춰야 하는 지를 명시합니다. 보통 비교 연산자를 가지고 있는 표현식이 될 것입니다.

  3. 마지막-표현식(final-expression) - 이것은 반복이 끝나고 나서 항상 동작하는 표현식입니다. 보통 초기화에서 선언된 변수의 값을 증가시키는데에 많이 사용됩니다. 

그러면 실제 예시를 한 번 볼게요.

```javascript
const friends = ['상수', '민철', '로건', '헐크'];
let msg = '나의 친구들: ';

for (let i = 0; i < friends.length; i++) {
  msg += friends[i] + ', ';
}

// "나의 친구들: 상수, 민철, 로건, 헐크, "
```

위의 예시는 반복문이 배열이 가진 아이템을 반복하기 위해서 사용되고 있습니다. 자바스크립트에서 아주 흔한 패턴입니다. 

1. 카운트 변수(counter variable), `i`가 `0` 의 값으로 초기화 되었습니다.

2. 조건, `i < friends.length` 를 보시면, i가 `friends` 배열의 길이보다 커질 때 까지 반복을 계속 하라고 명시되어 있습니다. 여기서의 조건은, 반복문이 작동하는 조건입니다. 쉽게 말해, `i`가 `friends.length`보다 작을 때만 코드를 작동하라는 것입니다.

3. 반복문에서, 우리는 msg의 변수가 가지고 있는 문자열 `나의 친구들: `에 각각 배열의 아이템을 덧붙여 줍니다. 

  1. `i`가 0인 첫번째 반복에서, `friends[0]`의 값인 `상수`를 덧붙여 줍니다.

  2. `i`가 1인 두번째 반복에서도, `friends[1]`의 값인 `민철`을 덧붙여 줍니다.

  3. 매 반복이 끝날때 마다, 마지막 표현식 `i++`이 작동하며 카운트 변수를 1씩 증가시킵니다.

4. `i`의 값이 `friends.length`와 같아졌을때, 반복은 멈춥니다.

마지막으로, 우리의 결과값을 보시면 아주 이상적인 결과값은 아니라는 것을 알 수 있습니다.

> "나의 친구들: 상수, 민철, 로건, 헐크, "

마지막에 `,`는 불필요하죠? 이럴 경우에는, 간단하게 반복문안에 조건문을 넣어주면 됩니다.

```javascript
for (let i = 0; i < friends.length; i++) {
  if (i === friends.length - 1) {
    msg += friends[i] + '입니다.';
  } else {
    msg += friends[i] + ', ';
  }
}
```

## break로 반복문 탈출하기

만약에 반복문을 끝내지 않고 중간에 멈추고 싶다면, 여러분은 `break` 문을 쓰실 수 있습니다. 아마 `switch` 문에서 `break`를 사용하셨던 걸 기억하실 겁니다. `break`문은 반복문을 바로 탈출하고, 그 다음의 코드를 작동시킵니다.

예를 들어서 여러분이 선생님이라고 가정해볼게요. 여러분은 배열 안에 들어가있는 학생들의 전화번호중에서, 한 학생의 번호를 찾고 싶다고 가정해볼게요. 그러면 우리는 그 학생의 전화번호만 찾으면 반복문을 멈추면 되죠?

예시를 보겠습니다.

```javascript
const contacts = ['상수:01012345678', '민철:01098765432', '로건:01024681357', '헐크:01013572468'];

function getContact(searchName, contacts) {
  let contactFound = false;
  
  for (let i = 0; i < contacts.length; i++) {
    const splitContact = contacts[i].split(':');
    const studentName = splitContact[0];
    const studentNumber = splitContact[1];

    console.log(`${i+1}번째 반복: `)
    if (searchName === studentName) {
      console.log(`${searchName}의 번호는 '${studentNumber}' 입니다.`);
      contactFound = true;
      break;
    } 
  }

  if (!contactFound) {
    console.log(`${searchName}라는 학생은 못 찾았습니다.`);
  }
}


getContact('로건', contacts);
// 1번째 반복:
// 2번째 반복:
// 3번째 반복:
// 로건의 번호는 '01024681357' 입니다.
```

1. `contacts` 라는 배열을 선언해줍니다. 배열안에는 학생의 이름과 전화번호가 있습니다.

2. `getContact` 라는 함수를 선언하여줍니다. 이 함수는 searchName과 contact라는 매개변수를 가집니다. `searchName`은 전화번호를 찾기 위한 이름이고, `contact`는 이름을 찾을 전화번호부 입니다.

3. `contacts` 배열의 길이만큼 반복하는 `for` 반복문이 실행됩니다. contacts의 길이는 여기서 4이니, 4번 반복할 것입니다. 

4. `for` 반복문에서:

  1. splitContact라는 변수를 선언하여줍니다. 이 변수안에는 contacts 배열의 원소가 ':'를 기준으로 나뉜 배열이 들어가 있을 것입니다. 예를 들어, 첫번째 반복에서는 `상수:01012345678` 을 ':' 기준으로 나눈다면, splitContact에는 `[상수, 01012345678]` 이라는 값이 들어갈 것입니다.

  2. studentName과 studentNumber에 각각 이름과 전화번호를 넣어줍니다.

  3. 조건문을 이용해, 우리는 찾으려는 이름(`searchName`)과 현재 배열의 아이템의 이름(`studentName`)이 같다면, 전화번호를 출력해주고 `break` 문을 통해 반복문을 빠져나갑니다. 그것이 아니라면, 반복문을 계속 실행합니다.

5. 위에서는, 로건이라는 친구의 번호가 배열의 3번째에 위치하였기 때문에, 반복문이 3번만 동작한 뒤, 반복문을 탈출합니다.

## continue로 반복문 건너뛰기

`continue` 문은 `break`문과 비슷합니다. 하지만 `break` 문과 약간 반대로, 현재의 반복을 건너뛰는 역할을 하죠. 한 번 예시를 보고 이해해보겠습니다.


```javascript
const number = 5;

for (let i = 0; i < number; i++) {
  if (i === 2) {
    continue;
    console.log('이 코드는 실행되지 않습니다.');
  }

  console.log(`현재 값은 ${i}입니다.`);
}

// 현재 값은 0입니다.
// 현재 값은 1입니다.
// 현재 값은 3입니다.
// 현재 값은 4입니다.
```

위의 예시를 보시면 `i`의 값이 2일때, `continue` 문을 사용하여 다음 반복으로 바로 넘어갈 수 있도록 해주었습니다. 그래서 출력물을 보시면, `console.log('이 코드는 실행되지 않습니다.');` 라는 문구는 출력되지 않은 것을 확인하실 수 있습니다.

## while과 do ... while

자바스크립트에는 `for` 반복문만 있는 것은 아닙니다. 다른 것들도 있는데, 지금 이것을 다 이해할 필요는 없지만, 어떻게 생긴지 보는 것은 의미가 있습니다. 왜냐하면 나중에 다른 사람의 코드를 봤을 때 이것이 어떤 것인지 이해를 하고, 이해가 안된다면 그에 맞게 정보를 찾아볼 수 있기 때문이죠.

처음으로, `while` 이라는 반복문을 보시죠.

```javascript
초기화
while (조건) {
  // 실행할 코드

  마지막 표현식
}
```

`while`문은 `for`문이랑 아주 비슷한데, 초기화가 반복문 이전에 선언된다는게 약간 다릅니다. 그리고 조건문이 `while` 뒤에 있는 괄호안에 들어가죠. 그리고 마지막 표현식은 `while` 문 안에서 동작합니다. 사실 `for` 반복문과 구조는 똑같습니다. 하지만 약간 다른 문법을 가지고 있을 뿐이죠.

아까 친구들 이름의 배열을 한 번 `while` 문을 이용해 출력해보겠습니다.

```javascript
const friends = ['상수', '민철', '로건', '헐크'];
let msg = "나의 친구들의 이름은 ";

let i = 0; // 초기화
while (i < friends.length) { // 조건
  if (i === friends.length - 1) {
    msg += friends[i] + '입니다.';
  } else {
    msg += friends[i] + ', ';
  }

  i++; // 마지막 표현식
}

console.log(msg); // 나의 친구들의 이름은 상수, 민철, 로건, 헐크입니다.
```

위의 예시에서, 우리는 `i`라는 변수를 선언해주고 0이라는 값을 넣어줍니다. 그리고 `while` 반복문을 실행하는데, 조건으로 `i < friends.length` 보다 작을 때 라는 조건을 주죠. 여기서 `friends.length`의 값은 `4`입니다. 그리고, 이름을 `msg` 변수에 더해주고, 마지막으로 `i++` 라는 표현식을 써주어, `i`의 값을 증가시킴으로써, 마지막에는 `i`가 `friends.length`의 값을 넘어섰을때 반복문을 탈출합니다.

**do...while 반복문**

`do...while` 문도 비슷합니다. 하지만 약간 다른 점은, 조건이 가장 마지막에 온다는 것이죠.

```javascript
초기화
do {
  // 실행할 코드

  마지막 표현식
} while (조건)
```

그래서, 일단 먼저 코드를 실행하고 조건을 봅니다. 위의 예시를 `do...while` 문으로 다시 작성해볼게요.

```javascript
const friends = ['상수', '민철', '로건', '헐크'];
let msg = "나의 친구들의 이름은 ";

let i = 0; // 초기화
do { // 조건
  if (i === friends.length - 1) {
    msg += friends[i] + '입니다.';
  } else {
    msg += friends[i] + ', ';
  }

  i++; // 마지막 표현식
} while (i < friends.length);

console.log(msg); // 나의 친구들의 이름은 상수, 민철, 로건, 헐크입니다.
```

사실 결과값은 `while` 문의 코드와 똑같습니다. 하지만, `do...while`은 조건을 확인하기 전에 항상 먼저 반복문안의 코드를 한 번 실행한다는 점에서 약간 다르다는 것을 알 수 있습니다.

## 연습문제

### 카운트다운

이번 연습문제에서는, `while` 문을 사용하여 카운트다운을 하는 코드를 한 번 작성하여보겠습니다.

- 10부터 0까지 반복을 하세요. `let i = 10;` 으로 초기화를 합니다.

- 매 반복마다, `몇초 남았습니다.` 라는 식으로 출력을 하여주세요. 예를 들어, 8초가 남았다면 `8초 남았습니다.`라고 출력하여주면 됩니다.

  - 만약에 숫자가 10이라면, `카운트다운 시작합니다.` 라는 문구를 추가하여주세요.

  - 만약에 숫자가 0이라면, `발사!` 라는 문구를 출력하여 주시면 됩니다.

- 마지막 표현식을 꼭 사용하여 주세요. 이때까지 저희는 숫자를 증가시키려 `i++`를 사용하였습니다. 숫자를 줄이려면 무엇을 사용해야 할까요?

### 숫자 100이 넘는 인풋만 받아들이기

유저가 100이 넘는 숫자를 입력할 때까지 계속 질문을 하는 코드를 만들어 주세요. 

만약에, 유저가 아무것도 입력하지 않거나 그냥 취소를 누르면 반복문은 반드시 계속 질문을 `prompt()`를 이용해 띄워야 합니다.













